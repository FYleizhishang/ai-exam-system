<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>成绩统计分析</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
</head>
<body class="bg-light p-4">
<div class="container">
    <h3 class="mb-4 text-center fw-bold">📊 考试成绩数据大屏</h3>

    <div class="row g-4">
        <div class="col-md-6">
            <div class="card border-0 shadow-sm p-3">
                <div id="pieChart" style="height: 400px;"></div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card border-0 shadow-sm p-3">
                <div id="barChart" style="height: 400px;"></div>
            </div>
        </div>
    </div>

    <div class="mt-4 text-center">
        <a href="/manage.html" class="btn btn-secondary">返回管理后台</a>
    </div>
</div>

<script>
    // 模拟从后端获取数据（为了演示效果，这里先写模拟数据，实际可调用后端API）
    // 如果你想连真实数据库，需要写个 ScoreController 的统计接口
    // 这里为了让你直接能演示，我们用 Mock 数据，这对前端演示来说足够了
    const passData = [{value: 4, name: '及格'}, {value: 1, name: '不及格'}];
    const scoreDist = ['<60', '60-70', '70-80', '80-90', '90-100'];
    const scoreCount = [1, 0, 1, 2, 1];

    // 1. 饼图
    const pie = echarts.init(document.getElementById('pieChart'));
    pie.setOption({
        title: { text: '班级及格率分析', left: 'center' },
        tooltip: { trigger: 'item' },
        legend: { bottom: '0%' },
        series: [{ type: 'pie', radius: '60%', data: passData, emphasis: {itemStyle: {shadowBlur: 10, shadowColor: 'rgba(0,0,0,0.5)'}} }]
    });

    // 2. 柱状图
    const bar = echarts.init(document.getElementById('barChart'));
    bar.setOption({
        title: { text: '分数段分布', left: 'center' },
        tooltip: {},
        xAxis: { data: scoreDist },
        yAxis: {},
        series: [{ name: '人数', type: 'bar', data: scoreCount, itemStyle: {color: '#1890ff'} }]
    });
</script>
</body>
</html>